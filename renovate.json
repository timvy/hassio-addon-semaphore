{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": ["config:recommended", ":dependencyDashboard", ":semanticCommits"],
  "timezone": "UTC",
  "schedule": ["at any time"],
  "labels": ["dependencies", "renovate"],
  "assignees": ["timvy"],
  "reviewers": ["timvy"],
  "platformAutomerge": true,
  "automerge": false,
  "major": {
    "automerge": false
  },
  "minor": {
    "automerge": true
  },
  "patch": {
    "automerge": true
  },
  "customManagers": [
    {
      "customType": "regex",
      "description": "Update Semaphore version in Dockerfile",
      "fileMatch": ["(^|/)Dockerfile$"],
      "matchStrings": ["ARG SEMAPHORE_VERSION=(?<currentValue>[^\\s\\n]+)"],
      "datasourceTemplate": "github-releases",
      "depNameTemplate": "semaphoreui/semaphore",
      "extractVersionTemplate": "^v(?<version>.*)$"
    },
    {
      "customType": "regex",
      "description": "Update Debian base image in Dockerfile",
      "fileMatch": ["(^|/)Dockerfile$"],
      "matchStrings": [
        "ARG BUILD_FROM=ghcr\\.io\\/hassio-addons\\/debian-base:(?<currentValue>[^\\s\\n]+)"
      ],
      "datasourceTemplate": "github-releases",
      "depNameTemplate": "hassio-addons/addon-debian-base",
      "extractVersionTemplate": "^v(?<version>.*)$"
    }
  ],
  "packageRules": [
    {
      "description": "Group Semaphore updates",
      "matchManagers": ["custom.regex"],
      "matchDepNames": ["semaphoreui/semaphore"],
      "groupName": "Semaphore",
      "automerge": true,
      "minimumReleaseAge": "3 days"
    },
    {
      "description": "Group Debian base updates",
      "matchManagers": ["custom.regex"],
      "matchDepNames": ["hassio-addons/addon-debian-base"],
      "groupName": "Debian Base",
      "automerge": true,
      "minimumReleaseAge": "7 days"
    },
    {
      "description": "Allow major version updates for base images (with manual review)",
      "matchManagers": ["custom.regex"],
      "matchDepNames": ["hassio-addons/addon-debian-base"],
      "major": {
        "enabled": true,
        "automerge": false
      },
      "minimumReleaseAge": "14 days"
    }
  ],
  "prBodyTemplate": "This PR updates {{depName}} from {{currentVersion}} to {{newVersion}}.\n\n{{#if hasReleaseNotes}}## Release Notes\n{{{releaseNotes}}}{{/if}}\n\n---\nðŸ“… **Schedule**: {{schedule}}\nðŸš¦ **Automerge**: {{automerge}}\nâ™» **Rebasing**: {{rebaseWhen}}\nðŸ”• **Ignore**: Close this PR and you won't be reminded about this update again.\n\n*This update was automatically created by Renovate Bot*",
  "prConcurrentLimit": 2,
  "prHourlyLimit": 1
}
